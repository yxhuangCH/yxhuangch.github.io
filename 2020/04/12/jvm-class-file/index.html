<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="yxhuang" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2">






<meta name="description" content="Class 文件结构Class 文件是一组以 8 位字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑地排列在 Class 文件中，中间没有添加任何分隔符。 1  ClassFile 结构（从上往下顺序）    数据类型 定义 说明     u4 magic 魔数，固定是 0xCAFEBABE   u2 minor_version 副版本号   u2 major_version 主版本号">
<meta property="og:type" content="article">
<meta property="og:title" content="Java 虚拟机（二）：Class 文件结构">
<meta property="og:url" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/index.html">
<meta property="og:site_name" content="yxhuang">
<meta property="og:description" content="Class 文件结构Class 文件是一组以 8 位字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑地排列在 Class 文件中，中间没有添加任何分隔符。 1  ClassFile 结构（从上往下顺序）    数据类型 定义 说明     u4 magic 魔数，固定是 0xCAFEBABE   u2 minor_version 副版本号   u2 major_version 主版本号">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_1.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_2.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_3.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_4.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_5.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_6.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_7.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_8.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_9.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_10.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_10_1.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_11.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_7.2.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_7.2.1.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_12.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_7.2.2.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_13.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_14.png">
<meta property="og:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_15.png">
<meta property="og:updated_time" content="2020-04-14T00:10:14.690Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java 虚拟机（二）：Class 文件结构">
<meta name="twitter:description" content="Class 文件结构Class 文件是一组以 8 位字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑地排列在 Class 文件中，中间没有添加任何分隔符。 1  ClassFile 结构（从上往下顺序）    数据类型 定义 说明     u4 magic 魔数，固定是 0xCAFEBABE   u2 minor_version 副版本号   u2 major_version 主版本号">
<meta name="twitter:image" content="https://yxhuangch.github.io/2020/04/12/jvm-class-file/jvm_class_1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://yxhuangch.github.io/2020/04/12/jvm-class-file/">





  <title>Java 虚拟机（二）：Class 文件结构 | yxhuang</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">yxhuang</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yxhuangch.github.io/2020/04/12/jvm-class-file/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yxhuang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yxhuang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java 虚拟机（二）：Class 文件结构</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-12T21:14:25+08:00">
                2020-04-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Class-文件结构"><a href="#Class-文件结构" class="headerlink" title="Class 文件结构"></a>Class 文件结构</h1><p><strong>Class 文件是一组以 8 位字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑地排列在 Class 文件中，中间没有添加任何分隔符。</strong></p>
<h2 id="1-ClassFile-结构"><a href="#1-ClassFile-结构" class="headerlink" title="1  ClassFile 结构"></a>1  ClassFile 结构</h2><p>（从上往下顺序）</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>定义</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>u4</td>
<td>magic</td>
<td>魔数，固定是 0xCAFEBABE</td>
</tr>
<tr>
<td>u2</td>
<td>minor_version</td>
<td>副版本号</td>
</tr>
<tr>
<td>u2</td>
<td>major_version</td>
<td>主版本号</td>
</tr>
<tr>
<td>u2</td>
<td>constanct_pool_count</td>
<td>常量池计数器</td>
</tr>
<tr>
<td>cp_info</td>
<td>constanct_pool[constanct_pool_count - 1]</td>
<td>常量池</td>
</tr>
<tr>
<td>u2</td>
<td>access_flags</td>
<td>访问标志</td>
</tr>
<tr>
<td>u2</td>
<td>this_class</td>
<td>类索引</td>
</tr>
<tr>
<td>u2</td>
<td>super_class</td>
<td>父类索引</td>
</tr>
<tr>
<td>u2</td>
<td>interfaces_count</td>
<td>接口计数器</td>
</tr>
<tr>
<td>u2</td>
<td>interfaces[interfaces_count]</td>
<td>接口表</td>
</tr>
<tr>
<td>u2</td>
<td>fields_count</td>
<td>字段计算器</td>
</tr>
<tr>
<td>field_info</td>
<td>fields[fields_count]</td>
<td>字段表</td>
</tr>
<tr>
<td>u2</td>
<td>methods_count</td>
<td>方法计数器</td>
</tr>
<tr>
<td>method_info</td>
<td>methods[methods_count]</td>
<td>类和接口中定义的所有方法</td>
</tr>
<tr>
<td>u2</td>
<td>attributes_count</td>
<td>属性计数器</td>
</tr>
<tr>
<td>attribute_info</td>
<td>attributs[attributes_count]</td>
<td>属性表</td>
</tr>
</tbody>
</table>
<p>说明：</p>
<ul>
<li>u1 代表1个字节</li>
<li>u2 代表2个字节</li>
<li>u4 代表4个字节</li>
<li>u8 代表8个字节</li>
</ul>
<h3 id="1-1-特殊方法"><a href="#1-1-特殊方法" class="headerlink" title="1.1 特殊方法"></a>1.1 特殊方法</h3><ul>
<li><init> 这个方法名称由编译器生成的，它代表着类的实例化，也就是说构造函数的调用</init></li>
<li><clinit> 这个方法名称也是由编译器生成的，它代表着静态类的调用</clinit></li>
</ul>
<h3 id="1-2-描述符标识字符含义"><a href="#1-2-描述符标识字符含义" class="headerlink" title="1.2 描述符标识字符含义"></a>1.2 描述符标识字符含义</h3><table>
<thead>
<tr>
<th>标识符字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>B</td>
<td>byte</td>
</tr>
<tr>
<td>C</td>
<td>char</td>
</tr>
<tr>
<td>D</td>
<td>double</td>
</tr>
<tr>
<td>F</td>
<td>float</td>
</tr>
<tr>
<td>I</td>
<td>int</td>
</tr>
<tr>
<td>J</td>
<td>long</td>
</tr>
<tr>
<td>S</td>
<td>short</td>
</tr>
<tr>
<td>Z</td>
<td>boolean</td>
</tr>
<tr>
<td>V</td>
<td>特殊类型 void</td>
</tr>
<tr>
<td>L</td>
<td>对象类型，例如 Ljava/lang/Object</td>
</tr>
</tbody>
</table>
<p>数组类型，每一维将使用一个前置的 “[“ 字符来描述，<br>例如 String[][] -&gt; [[Ljava/lang/String, int[] -&gt; [i</p>
<p>用描述符描述方法时，按参数先，后返回值的顺序描述<br>例如</p>
<blockquote>
<p>int  indexOf(Sting a, int i) 对应是 (Ljava/lang/StringI)I<br>void inc()  对应 ()V</p>
</blockquote>
<h2 id="2-Magic-魔数-与版本"><a href="#2-Magic-魔数-与版本" class="headerlink" title="2 Magic 魔数 与版本"></a>2 Magic 魔数 与版本</h2><p><img src="/2020/04/12/jvm-class-file/jvm_class_1.png" width="100%" height="100%"></p>
<p>源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yxhuang.jvm.bytecode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setA</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-Magic-Number-魔数-u4"><a href="#2-1-Magic-Number-魔数-u4" class="headerlink" title="2.1 Magic Number 魔数 u4"></a>2.1 Magic Number 魔数 u4</h3><p>位于 Class 文件的头四个字节成为魔数(Magic Number)<br>作用是确定这个文件能否被虚拟机接受的 Class 文件</p>
<p>上图中 <code>CA FE BA BE</code> 四个字节就是 Magice Number 固定不变</p>
<h3 id="2-2-版本"><a href="#2-2-版本" class="headerlink" title="2.2 版本"></a>2.2 版本</h3><ul>
<li>minor_version 副版本号 u2</li>
<li>major_version 主版本号 u2</li>
</ul>
<p><strong>高版本好的虚拟机可以支持低版本号的 Class 文件，反之则不行</strong></p>
<p>例如52.1<br>52 是主版本号， 0.1 是副版本号</p>
<p>常用的 Class 文件版本号</p>
<table>
<thead>
<tr>
<th>编译器器版本</th>
<th>十六进制版本号</th>
<th>十进制版本号</th>
</tr>
</thead>
<tbody>
<tr>
<td>JDK 1.7.0</td>
<td>00 00 00 32</td>
<td>50</td>
</tr>
<tr>
<td>JDK 1.8.0</td>
<td>00 00 00 34</td>
<td>52</td>
</tr>
</tbody>
</table>
<p>上图中 <code>00 00 00 34</code> 代表版本号，副版本号是 <code>00 00</code>, 主版本号是 <code>00 34</code> 则说明是 JDK 1.8 编译的</p>
<h2 id="3-常量池-constant-pool"><a href="#3-常量池-constant-pool" class="headerlink" title="3 常量池 constant_pool"></a>3 常量池 constant_pool</h2><h3 id="3-1-说明"><a href="#3-1-说明" class="headerlink" title="3.1 说明"></a>3.1 说明</h3><p><strong>Class 文件结构中，只有常量池的计数是从 1 开始的，其他集合类型都是从 0 开始</strong></p>
<p>图一中的 contant_pool_count 是 <code>00 18</code> 变成 10 进制是 24，但是常量个数 = 24 -1 = 23 个</p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_2.png" width="50%" height="50%"></p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_3.png" width="80%" height="50%"></p>
<h3 id="3-2-例子"><a href="#3-2-例子" class="headerlink" title="3.2 例子"></a>3.2 例子</h3><p>看第一个常量 <code>0x0A</code> 是 10，对应上表是 CONSTANT_Methodref_info </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CONSTANT_Methodref_info&#123;</span><br><span class="line">    u1 tag                   0A</span><br><span class="line">    u2 class_index           00 04  </span><br><span class="line">    u2 name_and_type_index   00 14</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>0A</strong> 对应是 CONSTANT_Methodref_info 类型</li>
<li><strong>00 04</strong> class_index， 指向常量池表中索引 #4 的 CONSTANT_Class_info 结构。<br>CONSTANT_Class_info 表示一个类或接口，当前字段或方法就是这个类或接口的成员</li>
<li><strong>00 14</strong> name_and_type_index，指向常量池索引为 #20 的 CONSTANT_NameAndType_info结构。 CONSTANT_NameAndType_info 结构表示当前字段或方法的描述符</li>
</ul>
<p>对着下图，我们看到</p>
<blockquote>
<p> #1 对应 Methodref, 指向   #4.#20， 和我们上面分析的一致</p>
<p> #4 Class 指向 #23 java/lang/Object 说明当前这个方法是 java.lang.Object</p>
<p> #20 NameAndType 指向了 #7和#8  <init>()V 说明这个方法是 <init>；方法描述符是 ()V</init></init></p>
</blockquote>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_4.png" width="80%" height="50%"><br>常量池例子图一</p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_5.png" width="80%" height="50%"><br>常量池例子图二</p>
<p>常量池例子图二 中选中的字节就是常量池的内容<br>其他的方法可以用类似例子的方法对照常量项的结构总表一个个去分析</p>
<p>常量池中的 14 种常量项的结构总表<br><img src="/2020/04/12/jvm-class-file/jvm_class_6.png" width="80%" height="50%"><br><img src="/2020/04/12/jvm-class-file/jvm_class_7.png" width="80%" height="50%"></p>
<h3 id="3-3-访问标志-access-flags-u2"><a href="#3-3-访问标志-access-flags-u2" class="headerlink" title="3.3  访问标志 access_flags u2"></a>3.3  访问标志 access_flags u2</h3><p>访问标志在常量池之后的后两位 u2, 用于标志类或接口层次的访问信息；<br>包括</p>
<ul>
<li>这个 Class 是类还是接口</li>
<li>是否定义为 public 类型</li>
<li>是否定义为 abstract 类型</li>
<li>如果是类的话，是否被定义为 final</li>
</ul>
<p>一般是两个位的组合</p>
<table>
<thead>
<tr>
<th>标志名称</th>
<th>标志值</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACC_PUBLIC</td>
<td>0x0001</td>
<td>是否为 pulic 类型</td>
</tr>
<tr>
<td>ACC_FINAL</td>
<td>0x0010</td>
<td>是否声明为 final,只有类可设置</td>
</tr>
<tr>
<td>ACC_SUPER</td>
<td>0x0020</td>
<td>是否允许使用 invokespecial 字节码的新语意</td>
</tr>
<tr>
<td>ACC_INTERFACE</td>
<td>0x0200</td>
<td>标志这是个接口</td>
</tr>
<tr>
<td>ACC_ABSTEACT</td>
<td>0x0400</td>
<td>是否为 sbstract 类型，对于接口或抽象类说，此标志值为真，其他类值为假</td>
</tr>
<tr>
<td>ACC_SYNTHETIC</td>
<td>0x1000</td>
<td>标识这个类并非由用户代码产生的</td>
</tr>
<tr>
<td>ACC_ANNOTATION</td>
<td>0x2000</td>
<td>标识这个是注解</td>
</tr>
<tr>
<td>ACC_ENUM</td>
<td>0x4000</td>
<td>标识这个是枚举</td>
</tr>
</tbody>
</table>
<p>如果是一个普通类，不是接口、枚举或者注解，被 public 关键字修饰但没有被声明为 final 和 abstract.是用组合值</p>
<p>0x0021 = 0x0001|0x0020</p>
<p>说明这个类是 PUBLIC, SUPTER</p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_8.png" width="80%" height="50%"></p>
<h2 id="4-类索引、父索引与接口索引集合"><a href="#4-类索引、父索引与接口索引集合" class="headerlink" title="4 类索引、父索引与接口索引集合"></a>4 类索引、父索引与接口索引集合</h2><p><strong>Class 文件由类索引、父索引和接口索引这三项数据来确定这个类的继承关系。</strong></p>
<h3 id="4-1-类索引-this-class"><a href="#4-1-类索引-this-class" class="headerlink" title="4.1 类索引 this_class"></a>4.1 类索引 this_class</h3><p>类索引用于确定这个类的全限定名<br>u2 类型的索引值，指向类型 CONSTANT_Class_info 的类描述符</p>
<h3 id="4-2-父索引-super-class"><a href="#4-2-父索引-super-class" class="headerlink" title="4.2 父索引 super_class"></a>4.2 父索引 super_class</h3><p>父索引用于确定这个类的父类全限定名<br>u2 类型的索引值，指向类型 CONSTANT_Class_info 的类描述符<br>除了 java.lang.Object 外，所有的 Java 类的父类索引都不为 0</p>
<h3 id="4-3-接口索引-interfaces"><a href="#4-3-接口索引-interfaces" class="headerlink" title="4.3 接口索引 interfaces"></a>4.3 接口索引 interfaces</h3><p>接口索引，入口是 u2 类型的的接口计数器（interfaces_count）表示索引表的容量。<br>如果及计数器值为 0 ，表示这个类没有任何接口，后面接口的索引表不占任何字节。</p>
<p>例子<br><img src="/2020/04/12/jvm-class-file/jvm_class_9.png" width="80%" height="50%"></p>
<p>上图中在常量池结束之后，就是类索引，查看 常量池例子图一<br><code>00 03</code>  指向 #3 的 CONSTANT_Class_info 索引， #3再指向 #20， 是</p>
<blockquote>
<p> #22 = Utf8               com/yxhuang/jvm/bytecode/Test1<br>说明这个类 <code>com.yxhuang.jvm.bytecode.Test1</code></p>
</blockquote>
<p>父类索引是 <code>00 04</code>， 指向 #4 的 CONSTANT_Class_info 索引，#4 再指向#23</p>
<blockquote>
<p> #23 = Utf8  java/lang/Object</p>
</blockquote>
<p>说明这个类的父类是 java.lang.Object。在 java 中如果一个类没有继承其他类，它的父类默认是 Object, 与我们现在看到的内容是对得上的</p>
<p>接口索引计数器 <code>00 00</code> 说明接口数量为 0， 则没有后面的接口索引表</p>
<h2 id="5-字段表-field-info"><a href="#5-字段表-field-info" class="headerlink" title="5 字段表 field_info"></a>5 字段表 field_info</h2><p><strong>字段表用于描述接口或类中声明的变量。<br>字段（field）包括类级变量（static field）以及实例变量,但不包括在方法内部声明的局部变量。</strong></p>
<p>字段表中不会列出从超类或者父类接口中继承而来的字段。</p>
<h3 id="5-1-字段表结构"><a href="#5-1-字段表结构" class="headerlink" title="5.1 字段表结构"></a>5.1 字段表结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">field_info &#123;</span><br><span class="line">    u2              access_flags</span><br><span class="line">    u2              name_index</span><br><span class="line">    u2              descriptor_index;</span><br><span class="line">    u2              attributes_count;</span><br><span class="line">    attribute_info   attributes[attributes_count]; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>access_flags 用于定义字段的访问权限和基本属性的掩码标识</li>
<li>name_index 对应常量池中的一个有效索引，指向 CONSTANT_Utf8_info 结构，标识一个有效的字段的非全限定名</li>
<li>descriptor_index 对应常量池中的一个字段描述符索引</li>
<li>attributes_count 表示当前字段的附加属性数量</li>
<li>attribute_info 附加属性<br>一般有：<ul>
<li>ConstantValue</li>
<li>Synthetic</li>
<li>Signature</li>
<li>Dprecated</li>
<li>RuntimeVisibleAnnotations</li>
<li>RuntimeInvisibleAnnoation</li>
</ul>
</li>
</ul>
<p>表5.1 字段 acces_flags 标志列表</p>
<table>
<thead>
<tr>
<th>标志名</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACC_PUBLIC</td>
<td>0x0001</td>
<td>声明为 public, 可以从包外访问</td>
</tr>
<tr>
<td>ACC_PRIVATE</td>
<td>0x0002</td>
<td>声明为 private, 只能自身访问</td>
</tr>
<tr>
<td>ACC_PROTECTED</td>
<td>0x0004</td>
<td>声明为 protected, 子类可以访问</td>
</tr>
<tr>
<td>ACC_STATIC</td>
<td>0x0008</td>
<td>声明为 static</td>
</tr>
<tr>
<td>ACC_FINAL</td>
<td>0x0010</td>
<td>声明为 final, 定义后无法修改</td>
</tr>
<tr>
<td>ACC_VOLATILE</td>
<td>0x0040</td>
<td>声明为 valatile, 被标识的字段无法储存</td>
</tr>
<tr>
<td>ACC_TRANSIENT</td>
<td>0x0080</td>
<td>声明为 transient, 被标识的字段不会序列化</td>
</tr>
<tr>
<td>ACC_SYNTHETIC</td>
<td>0x1000</td>
<td>声明为被表示的字段的编译器产生</td>
</tr>
<tr>
<td>ACC_ENUM</td>
<td>0x4000</td>
<td>声明为 enum, 枚举类型</td>
</tr>
</tbody>
</table>
<p>descriptor_index 是 1.2 节中的描述符</p>
<p>attributes 属性包含 见后面的 属性 章节</p>
<p><code>00 01</code> 是 fields_count，字段个数，说明只有 1 个字段<br><code>00 02</code> 是 access_flags，表示是该字段是 private<br><code>00 05</code> 是 name_index， 指向 #05 是 a<br><code>00 06</code> 是 descriptor_index， 指向 #06 是 I, 根据 1.2 描述符表说明这个类是 int<br><code>00 00</code> 是附加属性个数，0 说明这字段没有附加属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#5 = Utf8               a</span><br><span class="line">#6 = Utf8               I</span><br></pre></td></tr></table></figure>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_10.png" width="80%" height="50%"></p>
<h2 id="6-方法-method"><a href="#6-方法-method" class="headerlink" title="6 方法 method"></a>6 方法 method</h2><p>所有方法，包括实例初始化话方法以及类或接口初始化方法在内，都是由 methode_info 结构定义的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">method_info &#123;</span><br><span class="line">    u2               access_flags</span><br><span class="line">    u2               name_index</span><br><span class="line">    u2               descriptor_index</span><br><span class="line">    u2               attributes_count</span><br><span class="line">    attribute_info   attributes[attributes_count]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>access_flags 用于定义当前方法的访问权限和基本属性的掩码标识</li>
<li>name_index 对应常量池中的一个有效索引，指向 CONSTANT_Utf8_info 结构，标识一个有效的字段的非全限定名</li>
<li>descriptor_index 对应常量池中的一个字段描述符索引</li>
<li>attributes_count 表示当前方法的附加属性数量</li>
<li>attribute_info 附加属性<br>  包含：<pre><code>- Code
- Exceptions
- Synthetic
- Signature
- Dprecated
- RuntimeVisibleAnnotations
- RuntimeInvisibleAnnotations
- RuntimeVisibleParameterAnnotations
- RuntimeInvisibleParameterAnnotations
- AnnotationDefault
</code></pre></li>
</ul>
<p>  <img src="/2020/04/12/jvm-class-file/jvm_class_10_1.png" width="80%" height="50%"></p>
<p> <code>00 03</code> 是 method_count ,说明方法的入口说明有三个方法，对照我们的源码，我们定义了 <code>getA</code> <code>setA</code> 两个方法，另外就是编译器自动为当前类生成的无参构造函数方法</p>
<p> <code>00 01</code> 是 access_flags， 对照方法访问标志表，说明该方法是 public<br> <code>00 07</code> 是 name_index， 指向常量池 #7 ，是<init><br> <code>00 08</code> 是 descriptor_index， 指向常量池的 #8, 是 ()V<br> <code>00 01</code> 是 attributes_count， 附加属性个数是 1<br> <code>00 09</code> 是 attribute_info， 附加属性的指向索引 #9，是 Code, 关于 Code 可以看 第七节属性 </init></p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_11.png" width="80%" height="50%"></p>
<h2 id="7-Code-属性"><a href="#7-Code-属性" class="headerlink" title="7 Code 属性"></a>7 Code 属性</h2><p>Code 属性是变长属性，位于 method_info 结构的 <code>attribute_info</code> 中。<br>一个 Code 属性只为唯一一个方法、实例初始化方法、类或接口初始化方法保存 Java　虚拟机指令及其相关辅助信息。</p>
<h3 id="7-1-格式"><a href="#7-1-格式" class="headerlink" title="7.1 格式"></a>7.1 格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Code_attribute &#123;</span><br><span class="line">    u2      attribute_name_index;   // 一般是 &apos;Code&apos;</span><br><span class="line">    u4      attribute_length;</span><br><span class="line">    u2      max_stack;</span><br><span class="line">    u2      max_locals;</span><br><span class="line">    u4      code_length;</span><br><span class="line">    u1      code[code_length];</span><br><span class="line">    u2      exception_table_length;</span><br><span class="line">    &#123;</span><br><span class="line">        u2  start_pc;</span><br><span class="line">        u2  end_pc;</span><br><span class="line">        u2  handler_pc;</span><br><span class="line">        u2  catch_type;</span><br><span class="line">    &#125; exception_table[exception_table_length];</span><br><span class="line">    u2      attributes_count;</span><br><span class="line">    attribute_info  attributes[attributes_count];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>attribute_name_index 是 属性名称的的常量索引 ，值一般是 Code</li>
<li>attribute_length 属性的的长度</li>
<li>max_stack 代表了操作数栈（Operand Stacks）深度的最大值。在方法执行的任意时刻，操作栈都不会超过这深度。</li>
<li>max_locals 代表了局部变量表所需的存储空间。存储单位是 Slot</li>
<li>code_length 代表编译之后的字节码指令长度， u4 类型，说明一个方法的最大长度是  <code>2^32 - 1</code>,也就是 65535</li>
<li>code[] 当前方法的 java 虚拟机的实际字节码， code 用于存储字节码指令的一系列字节流。 每个指令是 u1 类型， 根据对应的值去查虚拟机指令表</li>
<li>exception_table_length 异常表的成员个数</li>
<li>exception_table[] 异常表<ul>
<li>start_pc 和 end_pc 表示异常处理的索引范围，既 start_pc ≤ x &lt; end_pc</li>
<li>handle_pc 异常处理器的起点</li>
<li>catch_type 异常类型，指向常量池中的索引</li>
</ul>
</li>
<li>attributes_count 表示 Code 中的附加属性个数</li>
<li>attribute_info 附加属性</li>
</ul>
<h3 id="7-2-具体的例子"><a href="#7-2-具体的例子" class="headerlink" title="7.2 具体的例子"></a>7.2 具体的例子</h3><p><img src="/2020/04/12/jvm-class-file/jvm_class_7.2.png" width="80%" height="50%"></p>
<p><code>00 09</code> 在上面的 第 6 节已经说明了，是 #9, 值是 Code<br><code>00 00 00 38</code>  是 attribute_length 是 Code 属性长度，变成10进制是 56 个字节<br><code>00 02</code> 是 max_stack，说明操作栈是的最大深度是 2<br><code>00 01</code> 是 max_locals，说明存储空间是 1<br><code>00 00 00 0A</code> 是 code_length 说明 code 的长度是10个字节</p>
<h4 id="7-2-1-Code-的指令"><a href="#7-2-1-Code-的指令" class="headerlink" title="7.2.1 Code 的指令"></a>7.2.1 Code 的指令</h4><p>下面的内容是具体的 Code, 10 个字节， 每个字节可以根据虚拟机字节码指令表查找到,关于指令的具体行为，查看另外的资料 </p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_7.2.1.png" width="80%" height="50%"></p>
<blockquote>
<p>2A B7 00 01 2A 04 B5 00 02 B1</p>
</blockquote>
<ul>
<li><code>2A</code> 是 aload_0 指令</li>
<li><code>B7</code> 是 invokespecial指令， 调用父类的构造方法，  格式是  <code>invokespecial indexByte1 indexByte2</code>  </li>
<li><code>00 01</code> 指向常量池的 #1，是 <code>java/lang/Object.&quot;&lt;init&gt;&quot;:()V</code></li>
<li><code>2A</code> 是 aload_0 指令</li>
<li><code>04</code> 是 iconst_1 指令，将 int 型 1 推送至栈顶</li>
<li><code>B5</code> 是 putfield 是为指定的的类的实例赋值， 格式是 <code>putfield indexbyte1 indexbyte2</code> </li>
<li><p><code>00 02</code> 指向常量池的 #2 是 </p>
<blockquote>
<p>Fieldref       #3.#21         // com/yxhuang/jvm/bytecode/Test1.a:I</p>
</blockquote>
</li>
<li><p><code>B1</code> 是 return 指令</p>
</li>
</ul>
<p>通过 javap -verbose 看到的， 是一样的</p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_12.png" width="80%" height="50%"></p>
<h4 id="7-2-2-Code-异常表"><a href="#7-2-2-Code-异常表" class="headerlink" title="7.2.2 Code 异常表"></a>7.2.2 Code 异常表</h4><p><img src="/2020/04/12/jvm-class-file/jvm_class_7.2.2.png" width="80%" height="50%"></p>
<p>根据 Code 结构，在 Code 中跟在指令后面的是异常表</p>
<p><code>00 00</code> 是 exception_table_length 异常表的长度，这里是 0, 说明这个方法没有异常</p>
<h4 id="7-2-3-Code-的附近属性-attribute-info"><a href="#7-2-3-Code-的附近属性-attribute-info" class="headerlink" title="7.2.3 Code 的附近属性 attribute_info"></a>7.2.3 Code 的附近属性 attribute_info</h4><p>根据 Code 结构，在 Code 中跟在异常表后面的是附近属性</p>
<p><code>00 02</code> 是 attributes_count 代表这个方法的附近属性，这里是两个</p>
<p><strong>第一个附加属性</strong><br><code>00 0A</code> 是指向常量池的 #10, 是 LineNumberTable，说明这个属性是 LineNumberTable, 关于 LineNumberTable 属性，可以看后面的第 8 节<br><code>00 00 00 0A</code> 是 attribute_length， 表示附近附加属性的字节长度，只是是 10 个字节， 即后面的 <code>00 02 00 00 00 03 00 04 00 05</code></p>
<p><code>00 02</code> 是 line_number_table_length，表示  line_number 数组的个数，2 个</p>
<p><em>第一个数组</em><br><code>00 00</code> 是 start_pc，表示字节码行号， 这里是 0<br><code>00 03</code> 是 line_number， 表示 Java 源代码行数，这里是 3</p>
<p><em>第二个数组</em></p>
<p><code>00 04</code> 表示字节码行数是 4<br><code>00 05</code> 表示 Java 源代码行数是 5</p>
<p>对照下图，是和我们分析的一样</p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_13.png" width="80%" height="50%"></p>
<p>第一个属性已经结束了，来看看第二个属性</p>
<p><strong>第二个属性</strong><br><code>00 0B</code> 指向常量池的 #11 是 LocalVariableTable，是局部变量表，具体信息看看第 9 节<br><code>00 00 00 0C</code> 表示这个附加属性的长度是 14 个字节,即 <code>00 01 00 00 00 0A 00 0C 00 0D 00 00</code></p>
<p><code>00 01</code> 是 local_variable_table_length, 表示局部变量表的个数是 1<br><code>00 00</code> 是 start_pc 字节码行数 0<br><code>00 0A</code> 是 length，表示当前属性的长度，是 10<br><code>00 0C</code> 是 name_index，表示局部变量的名称，指向常量池的索引 #12，是 this<br><code>00 0D</code> 是 descriptor_index,表示局部变量的描述符，指向常量池的索引 #13，是 Lcom/yxhuang/jvm/bytecode/Test1;<br><code>00 00</code> 是 index，表示这个局部变量在栈帧局部变量表中 Slot 的位置，是 0</p>
<p>从上面的分支，和下图的结果可以看到是一样的</p>
<p><img src="/2020/04/12/jvm-class-file/jvm_class_14.png" width="80%" height="50%"></p>
<p>其他剩下的两个方法都可以按照这样去分析</p>
<h2 id="8-LineNumberTable-属性"><a href="#8-LineNumberTable-属性" class="headerlink" title="8  LineNumberTable 属性"></a>8  LineNumberTable 属性</h2><p>是可选、变长属性，位于 Code 结构中。<br>是用来确定源文件中的行号</p>
<h3 id="8-1-结构"><a href="#8-1-结构" class="headerlink" title="8.1 结构"></a>8.1 结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LineNumberTable_attribute &#123;</span><br><span class="line">    u2      attribute_name_index;  // 一般是 `LineNumberTable`</span><br><span class="line">    u4      attribute_length;</span><br><span class="line">    u2      line_number_table_length;</span><br><span class="line">    &#123;</span><br><span class="line">        u2  start_pc;</span><br><span class="line">        u2  line_number;</span><br><span class="line">    &#125;line_number_table[line_number_table_length];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>attribute_name_index 指向常量池中的索引，是 “LineNumberTable”</li>
<li>attribute_length 表示当前属性的长度</li>
<li>line_number_table_length 表示数组的成员的个数</li>
<li>start_pc 表示改字符在源文件中的字节码行数</li>
<li>line_number 表示这个值在源文件的行数</li>
</ul>
<h2 id="9-LocalVaribleTable-属性"><a href="#9-LocalVaribleTable-属性" class="headerlink" title="9  LocalVaribleTable 属性"></a>9  LocalVaribleTable 属性</h2><p>是可选、变长属性，位于 Code 结构中<br>确定在执行过程中给定局部变量的信息</p>
<p>结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">LocalVaribleTable_attribute &#123;</span><br><span class="line">    u2    attribute_name_index;    // 一般是`LocalVaribleTable`</span><br><span class="line">    u4    attribute_length; </span><br><span class="line">    u2    local_variable_table_length;</span><br><span class="line">    &#123;</span><br><span class="line">        u2  start_pc;</span><br><span class="line">        u2  length;</span><br><span class="line">        u2  name_index;</span><br><span class="line">        u2  descriptor_index;</span><br><span class="line">        u2  index;</span><br><span class="line">    &#125; local_variable_table[local_variable_table_length]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>attribute_name_index 是指向常量池中的索引，是 “LocalVaribleTable”</li>
<li>attribute_length 属性的长度</li>
<li>local_variable_table_length 局部变量表的长度</li>
<li>start_pc 和 length，表示所有给定的局部变量的索引都在范围[start_pc, start_pc + length) </li>
<li>index 表示一个局部变量的有效的非全限定名，指向常量池表的索引</li>
<li>descriptor_index 表示源程序中局部变量类型的字段描述符，指向常量池的索引</li>
<li>index 表示此局部标量在当前栈帧的局部变量表中的索引</li>
</ul>
<h2 id="10-属性-attribute"><a href="#10-属性-attribute" class="headerlink" title="10 属性 attribute"></a>10 属性 attribute</h2><p><strong>属性在 Class 文件格式中 ClassFile 结构、 field_info 结构、 method_info 结构 和 Code_attribute 结构中</strong></p>
<h3 id="通用格式"><a href="#通用格式" class="headerlink" title="通用格式"></a>通用格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">attribute_info&#123;</span><br><span class="line">    u2      attribute_name_index</span><br><span class="line">    u4      attribute_length</span><br><span class="line">    u2      info[attribute_length]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11-字节码文件的-Attribute"><a href="#11-字节码文件的-Attribute" class="headerlink" title="11 字节码文件的 Attribute"></a>11 字节码文件的 Attribute</h2><p><img src="/2020/04/12/jvm-class-file/jvm_class_15.png" width="80%" height="50%"></p>
<p><code>00 01</code> 代表属性个数， attributes_count， 只有一个<br><code>00 12</code> 是 attribute_name_index， 表示属性名称，指向 #18，是 SoureFile<br><code>00 00 00 02</code> 是 attribute_length， 表示属性长度，是 2<br><code>00 13</code> 是 attribute_info 的信息，指向 #19，是 Test1.java</p>
<p>上面说明，这个属性名称是 SourceFile, 名称是 Test1.java</p>
<h2 id="12-总结"><a href="#12-总结" class="headerlink" title="12 总结"></a>12 总结</h2><p>至此，我们整个 Class 文件已经分析完成了。分析 Class　文件需要耐心，按照　Class 文件结构，一个字节码，一个字节码去分析，就可以将整个 Class 文件弄清楚。</p>
<p>如果弄懂了整个 class 文件，对于学习 java 或者 kotlin 都有很大的帮助。<code></code></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://book.douban.com/subject/24722612/" target="_blank" rel="noopener">《深入理解 Java 虚拟机》(第2版)</a></li>
<li><a href="https://book.douban.com/subject/25792515/" target="_blank" rel="noopener">《Java 虚拟机规范》（Javs SE 7 版）</a></li>
</ul>
      
    </div>
    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/uploads/qrcode.jpg" alt="yxhuang wechat" style="width: 200px; max-width: 100%">
    <div>欢迎您扫一扫上面的微信公众号，订阅我的博客</div>
</div>

      </div>
    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/28/android-so-load/" rel="next" title="Android 动态链接库 So 的加载">
                <i class="fa fa-chevron-left"></i> Android 动态链接库 So 的加载
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/07/07/java-class-loader/" rel="prev" title="JVM(四)类加载器">
                JVM(四)类加载器 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="yxhuang">
          <p class="site-author-name" itemprop="name">yxhuang</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">38</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Class-文件结构"><span class="nav-number">1.</span> <span class="nav-text">Class 文件结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-ClassFile-结构"><span class="nav-number">1.1.</span> <span class="nav-text">1  ClassFile 结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-特殊方法"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1 特殊方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-描述符标识字符含义"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2 描述符标识字符含义</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Magic-魔数-与版本"><span class="nav-number">1.2.</span> <span class="nav-text">2 Magic 魔数 与版本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-Magic-Number-魔数-u4"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 Magic Number 魔数 u4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-版本"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 版本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-常量池-constant-pool"><span class="nav-number">1.3.</span> <span class="nav-text">3 常量池 constant_pool</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-说明"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-例子"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2 例子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-访问标志-access-flags-u2"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3  访问标志 access_flags u2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-类索引、父索引与接口索引集合"><span class="nav-number">1.4.</span> <span class="nav-text">4 类索引、父索引与接口索引集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-类索引-this-class"><span class="nav-number">1.4.1.</span> <span class="nav-text">4.1 类索引 this_class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-父索引-super-class"><span class="nav-number">1.4.2.</span> <span class="nav-text">4.2 父索引 super_class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-接口索引-interfaces"><span class="nav-number">1.4.3.</span> <span class="nav-text">4.3 接口索引 interfaces</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-字段表-field-info"><span class="nav-number">1.5.</span> <span class="nav-text">5 字段表 field_info</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-字段表结构"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1 字段表结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-方法-method"><span class="nav-number">1.6.</span> <span class="nav-text">6 方法 method</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Code-属性"><span class="nav-number">1.7.</span> <span class="nav-text">7 Code 属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-格式"><span class="nav-number">1.7.1.</span> <span class="nav-text">7.1 格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-具体的例子"><span class="nav-number">1.7.2.</span> <span class="nav-text">7.2 具体的例子</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-1-Code-的指令"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">7.2.1 Code 的指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-2-Code-异常表"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">7.2.2 Code 异常表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-3-Code-的附近属性-attribute-info"><span class="nav-number">1.7.2.3.</span> <span class="nav-text">7.2.3 Code 的附近属性 attribute_info</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-LineNumberTable-属性"><span class="nav-number">1.8.</span> <span class="nav-text">8  LineNumberTable 属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-结构"><span class="nav-number">1.8.1.</span> <span class="nav-text">8.1 结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-LocalVaribleTable-属性"><span class="nav-number">1.9.</span> <span class="nav-text">9  LocalVaribleTable 属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-属性-attribute"><span class="nav-number">1.10.</span> <span class="nav-text">10 属性 attribute</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通用格式"><span class="nav-number">1.10.1.</span> <span class="nav-text">通用格式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-字节码文件的-Attribute"><span class="nav-number">1.11.</span> <span class="nav-text">11 字节码文件的 Attribute</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-总结"><span class="nav-number">1.12.</span> <span class="nav-text">12 总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">1.13.</span> <span class="nav-text">参考</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yxhuang</span>

  
</div>


  <div class="powered-by">
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
  </div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">
    主题 &mdash;
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Pisces
    </a>
  </div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>